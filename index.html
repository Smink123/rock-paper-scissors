<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>Rock, paper, scissors!</h1>
  <p>Time to play: The game consts of 5 rounds. Who will win? Let's play!</p>
  <button id="rock">Rock</button>
  <button id="paper">Paper</button>
  <button id="scissors">Scissors</button>
  <div id="result_panel">
    <p id="roundResult"></p>
    <div id="score">
      <p id="myScore"></p>
      <p id="compScore"></p>
    </div>
    <div id="final_results">
      <p id="winner"></p>
    </div>
  </div>
  <script>
    const userScore = document.getElementById('myScore');
    const computerScore = document.getElementById('compScore');
    const roundResults = document.getElementById('roundResult');
    const theWinner = document.getElementById('winner');

    function getComputerChoice() {
      let choices = ['rock', 'paper', 'scissors'];
      let computerChoice = choices[Math.floor(Math.random() * choices.length)];
      return computerChoice;
    }
    let playerScore = 0;
    let compScore = 0;
    let currentRound = 0;

    function playRound(playerSelection, computerSelection) {
      if (
        (playerSelection === 'rock' && computerSelection === 'scissors') ||
        (playerSelection === 'paper' && computerSelection === 'rock') ||
        (playerSelection === 'scissors' && computerSelection === 'paper')) {
        playerScore++;
        userScore.textContent = `You have ${playerScore} points`
        computerScore.textContent = `the computer has ${compScore} points.`
        roundResults.textContent = `Wow, you won!`
      } else if (playerSelection === computerSelection) {
        playerScore++;
        compScore++;
        userScore.textContent = `You have ${playerScore} points`
        computerScore.textContent = `the computer has ${compScore} points.`
        roundResults.textContent = `It's a draw!`
      } else {
        compScore++;
        userScore.textContent = `You have ${playerScore} points`
        computerScore.textContent = `the computer has ${compScore} points.`
        roundResults.textContent = `Oh no, you lost!`
      }
    }
    const rockButton = document.getElementById('rock');
    const paperButton = document.getElementById('paper');
    const scissorsButton = document.getElementById('scissors');
    rockButton.addEventListener('click', function() {
      allRounds('rock');
    });
    paperButton.addEventListener('click', function() {
      allRounds('paper');
    });
    scissorsButton.addEventListener('click', function() {
      allRounds('scissors');
    });

    function final() {
      if (playerScore > compScore) {
        roundResults.textContent = `The final score is ${playerScore} to you, ${compScore} to the computer.`
        theWinner.textContent = `You win the game!`
      } else if (compScore > playerScore) {
        roundResults.textContent = `The final score is ${playerScore} to you, ${compScore} to the computer.`
        theWinner.textContent = `The computer wins the game!`
      } else if (playerScore === compScore) {
        roundResults.textContent = `The final score is ${playerScore} to you, ${compScore} to the computer.`
        theWinner.textContent = `It's a draw!`
      }
    }

    function allRounds(playerSelection) {
      if (currentRound < 5) {
        currentRound++;
        roundResults.textContent = `Round ${currentRound}`;
        playRound(playerSelection, getComputerChoice());
      }
      if (currentRound === 5) {
        final();
      }
    }
  </script>
</body>

</html>

